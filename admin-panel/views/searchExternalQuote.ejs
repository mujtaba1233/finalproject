<%- include header.ejs %>
<div ng-controller="SearchExternalQuoteController">
	<div class="row">
		<div class="col-md-6">
			<h2>External Quotes <span class="explanation">(yet to approve)</span></h2>

		</div>
	</div>
	<div class="table-responsive">
		<table st-table="quotes" st-safe-src="allquotes" class="table table-striped table-hover table-scroll" id="table-scroll">
			<thead>
				<!-- <tr id="advanceSearch">
					<th colspan="11">
						<div class="row">
							<div class="col-lg-3 col-md-3 col-sm-12">
								<label>
									Advance Search
								</label>
								<div class="form-group" style="margin-top:8px">
									<select ng-change="getQuotes()" class="custom-input form-control"
										ng-model="duration">
										<option value="1">Last 1 Months</option>
										<option value="3">Last 3 Months</option>
										<option value="6">Last 6 Months</option>
										<option value="12">Last 1 Year</option>
										<option value="24">Last 2 Years</option>
										<option value="60">Last 5 Years</option>
										<option value="all">All</option>
									</select>
									<p class="explanation">find qoutes from specific duration.</p>
								</div>
							</div>
							<div class="col-lg-3 col-md-3 col-sm-12">
								<label style="visibility: hidden;">Record Count</label>
								<div class="form-group" style="margin-top:15px">
									{{allquotes.length | number}} qoute(s) found from last {{duration}} month(s)
								</div>
							</div>
						</div>
					</th>
				</tr> -->
				<tr>
					<th style="width: 7%" st-sort="QuoteNo">Quote</th>
					<th style="width: 12%" st-sort="FirstName">Name</th>
					<th style="width: 13%" st-sort="EmailAddress">Email</th>
					<th style="width: 15%" st-sort="CompanyName">Company Name</th>
					<th style="width: 10%" st-sort="ShippingCity">Shipping City</th>
					<!-- <th style="width: 7%" st-sort="total">Total Amt</th> -->
					<th style="width: 9%" st-sort="createdOn">Created On</th>
					<th style="width: 9%" st-sort="cretedByName">Created By</th>
					<th style="width: 18%" class="text-center">Action</th>
					<!-- <th st-sort="balance">balance</th> -->
				</tr>
				<tr>
					<th colspan="8">
						<input st-search="" class="custom-input form-control" placeholder="global search ..."
							type="text" />
					</th>
				</tr>
				<tr>
					<th colspan="1">
						<input st-search="QuoteNo" class="custom-input form-control" placeholder="Id search ..."
							type="text" />
					</th>
					<th colspan="1">
						<input st-search="CustomerName" class="custom-input form-control" placeholder="Customer name search ..."
							type="text" />
					</th>
					<th colspan="1">
						<input st-search="CustomerEmail" class="custom-input form-control" placeholder="Email search ..."
							type="text" />
					</th>
					<th colspan="1">
						<input st-search="companies" class="custom-input form-control"
							placeholder="Company Name search ..." type="text" />
					</th>
					<th colspan="1">
						<input st-search="ShippingCity" class="custom-input form-control" placeholder="Ship City Name search ..."
							type="text" />
					</th>
					<th colspan="1">
						<input st-search="createdOn" class="custom-input form-control"
							placeholder="Created On search ..." type="text" />
					</th>
					<th colspan="2">
						<input st-search="cretedByName" class="custom-input form-control"
							placeholder="Created By search ..." type="text" />
					</th>
					<!-- <th colspan="1">
						<input st-search="pdfname" class="custom-input form-control" placeholder="PDF Name search ..."
							type="text" />
					</th> -->
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="q in quotes">
					<td style="word-break: break-all;"><a title="Edit Quote" target="_blank"
							ng-href="/edit?quote={{q.QuoteNo}}">{{q.QuoteNo}}</a></td>
					<td style="word-break: break-all;">{{q.CustomerName}}</td>
					<td style="word-break: break-all;">{{q.CustomerEmail}}</td>
					<td ng-if="q.BillingCompany == q.ShippingCompany">{{q.BillingCompany}}</td>
					<td ng-if="q.BillingCompany !== q.ShippingCompany"><small>Billing Company:
							{{q.BillingCompany}}</small> <br> <small>Shipping Company:
							{{q.ShippingCompany ? q.ShippingCompany : 'N/A'}}</small></td>
					<!-- <td style="word-break: break-all;">{{q.BillingCompany}}</td> -->
					<td style="word-break: break-all;">{{q.ShippingCity}}</td>
					<td style="word-break: break-all;">{{q.createdOn  | date:"MM/dd/yyyy"}}</td>
					<!-- <td style="">${{q.total |number:2}}</td> -->
					<td style="word-break: break-all;">{{q.cretedByName }}</td>
					<td class="text-center">
						<a title="Edit Quote" target="_blank" ng-href="/edit?quote={{q.QuoteNo}}"
							class="btn btn-sm btn-primary">
							<i class="fa fa-pencil fa-2x">
							</i>
						</a>
						<button ng-if="loggedInUser.usertype == 'admin'" title="Remove Quote"
							ng-click="removeQuote($index, q.QuoteNo)" class="btn btn-sm btn-danger">
							<i class="fa fa-trash fa-2x">
							</i>
						</button>
					</td>
				</tr>
			</tbody>
			<tfoot class="text-center d-flex justify-content-center tfoot-toggle">
				<tr>
					<td colspan="8">
						<div class="paging">
							<div st-pagination="" st-template="template/st-pagination.html"
								st-items-by-page="itemsByPage" st-displayed-pages="7"></div>
						</div>
					</td>
				</tr>
			</tfoot>
		</table>
	</div>
</div>


<%- include footer.ejs %>